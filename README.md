# REDCap to OMOP
Transforming healthcare data to fit the Observational Medical Outcomes Partnership (OMOP) Common Data Model (CDM) is essential for utilizing the Observational Health Data Sciences and Informatics (OHDSI) web tools, but it's a complex and daunting task. The journey begins with Athena, a resource aimed at mapping various terms to their corresponding OMOP tables. The challenge here is mapping your data, which could be derived from standard or non-standard terms from vocabularies like SNOMED or LOINC, to these Athena terms.

Traditionally, methods such as text comparison, fuzzy search, or tracking and weighting previously mapped values might be employed. However, we sought a more innovative solution by developing a web app that leverages the OpenAI GPT-3 word embeddings API. This approach involves storing terms from vocabularies like SNOMED in MongoDB collections. With this setup, users can upload their REDCap dictionary (or custom text) to be parsed and matched against selected word embedding collections.

The process involves sending text or survey data to the GPT-3 word embeddings API (unless already stored) and saving the resulting embeddings in a separate MongoDB collection. We then employ the cosine similarity function to ascertain the similarity between embeddings, generating a list of top matches. This method, while effective, is relatively slow and ripe for optimization, particularly in data storage and comparison techniques.

Once the matching process concludes, the web app presents an interface for users to review and select the most appropriate terms for their data. If a direct match isn't found, users can conduct a custom search in the Unified Medical Language System (UMLS). The final step involves exporting these mappings to a CSV file, which is then imported into a companion desktop app designed for building OMOP tables and performing the Extract, Transform, Load (ETL) process.

Choosing a desktop app for the ETL process was driven by the need to handle Protected Health Information (PHI) from REDCap securely. This setup facilitates managing security and user roles more effectively than a web app could, by limiting access to a single user per desktop app instance.

However, it's crucial to note that OMOP tables require a minimum amount of data to be mapped for successful ETL. At a minimum, the 'person' and 'observation_period' tables must be populated with the necessary fields. The desktop app must be informed about unique identifiers for individuals in the dataset and understand the date formats used. Once these prerequisites are met, users can proceed with the ETL, choosing between CSV or SQL files for their output and selecting the desired OMOP tables for their analysis.
